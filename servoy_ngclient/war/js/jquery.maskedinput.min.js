!function(y){var w=null!=window.orientation;y.mask={definitions:{"#":"[0-9]",U:"[A-Z]",L:"[a-z]",A:"[A-Za-z0-9]","?":"[A-Za-z]","*":".",H:"[A-F0-9]"},converters:{U:function(e){return e.toUpperCase()},L:function(e){return e.toLowerCase()},H:function(e){return e.toUpperCase()}}},y.fn.extend({caret:function(t,n){var e;if(0!=this.length)return"number"==typeof t?(n="number"==typeof n?n:t,this.each(function(){var e;this.setSelectionRange?(this.focus(),this.setSelectionRange(t,n)):this.createTextRange&&((e=this.createTextRange()).collapse(!0),e.moveEnd("character",n),e.moveStart("character",t),e.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,n=this[0].selectionEnd):document.selection&&document.selection.createRange&&(e=document.selection.createRange(),t=0-e.duplicate().moveStart("character",-1e5),n=t+e.text.length),{begin:t,end:n})},unmask:function(){return this.trigger("unmask")},mask:function(e,d){if(!e&&0<this.length){var t=y(this[0]),g=t.data("tests");return y.map(t.data("buffer"),function(e,t){return g[t]?e:null}).join("")}d=y.extend({placeholder:"_",completed:null},d);var n=y.mask.definitions,g=[],a=y.mask.converters,m=[],v=e.length,b=null,p=e.length,r=!1,k="";return y.each(e.split(""),function(e,t){r||"'"!=t?(!r&&n[t]?("*"==t&&d.allowedCharacters?g.push(new RegExp("["+d.allowedCharacters+"]")):g.push(new RegExp(n[t])),null==b&&(b=g.length-1)):(g.push(null),r=!1),m.push(a[t]),k+=t):(r=!0,p--,v--)}),this.each(function(){var c=y(this),u=y.map(k.split(""),function(e,t){return g[t]?l(t):e}),o=!1,r=c.val();function s(e){for(;++e<=p&&!g[e];);return e}function l(e){return 1<d.placeholder.length?d.placeholder.charAt(e):d.placeholder}function f(e,t){for(var n=e;n<t&&n<p;n++)g[n]&&(u[n]=l(n))}function h(){return c.val(u.join("")).val()}function i(e){for(var t=c.val(),n=-1,a=-1,r=0,i=0;r<p;r++)if(g[r]){for(u[r]=l(r);i++<t.length;){var o=t.charAt(i-1);if(o==u[r]){-1==a&&(a=r);break}if(g[r].test(o)){u[r]=o,n=r;break}}if(i>t.length)break}else u[r]==t.charAt(i)&&r!=v&&i++;return!e&&n+1<v||e&&-1==n?(c.val(""),f(0,p)):(e||v<=n+1)&&(h(),e||c.val(c.val().substring(0,n+1))),-1!=a?a:v?r:b}function e(e){e?setTimeout(function(){c.caret(i(!0))},0):c.caret(i(!0))}c.data("buffer",u).data("tests",g),c.attr("readonly")||c.one("unmask",function(){c.unbind(".mask").removeData("buffer").removeData("tests")}).bind("focus.mask",function(){r=c.val();var e=c.caret(),t=i(!0);h(),setTimeout(function(){t!=k.length?c.caret(t):c.caret(e.begin)},0)}).bind("blur.mask",function(){i(!0),c.val()!=r&&c.change()}).bind("keydown.mask",function(e){var t,n=y(this).caret(),a=e.keyCode;return o=a<16||16<a&&a<32||32<a&&a<41,37==a?(t=function(e){for(;0<=--e&&!g[e];);return e}(n.begin))!=n.begin?(c.caret(t),!1):void 0:39==a?(t=s(n.begin))!=n.begin?(c.caret(t),!1):void 0:(0<(t=s(n.begin-1)-n.begin)&&(n.begin+=t,n.end+=t),8==a||46==a||w&&127==a?(n.begin==n.end?function(e,t){for(;!g[e]&&0<=--e;);if(g[e]&&(u[e]=l(e)),h(),0!=t)for(var n=e+t;0<=n&&n<p;){if(g[n]){e=n;break}n+=t}c.caret(Math.max(b,e))}(n.begin+(46==a?0:-1),46==a?1:0):(f(n.begin,n.end),h(),c.caret(Math.max(b,n.begin))),!1):void(27==a?(c.val(r),c.caret(0,i()),e.preventDefault()):n.begin==n.end||o||f(n.begin,n.end)))}).bind("keypress.mask",function(e){if(o)return o=!1,8!=e.keyCode&&null;var t,n,a,r=(e=e||window.event).charCode||e.keyCode||e.which,i=y(this).caret();return!!(e.ctrlKey||e.altKey||e.metaKey)||(!(32<=r&&r<=125||186<r)||(t=s(i.begin-1))<p&&(n=String.fromCharCode(r),m[t]&&(n=m[t](n)),g[t].test(n)&&(u[t]=n,h(),a=s(t),y(this).caret(a),d.completed&&a==p&&d.completed.call(c))),!1)}).bind("input.mask",function(){e(!1)}).bind("paste.mask",function(){e(!0)}),i(!0)})}})}(jQuery);